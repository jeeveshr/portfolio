<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeevesh R | Strategic Developer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Supabase JS Library -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #F9F8F6; color: #1C1917; overflow-x: hidden; }
        h1, h2, h3, .display-text { font-family: 'Space Grotesk', sans-serif; }
        .chart-container { position: relative; width: 100%; max-width: 600px; margin-left: auto; margin-right: auto; height: 350px; }
        .nav-glass { background: rgba(249, 248, 246, 0.85); backdrop-filter: blur(12px); border-bottom: 1px solid rgba(0,0,0,0.05); }
        .tab-active { border-bottom: 2px solid #1C1917; color: #1C1917; }
        .tab-inactive { color: #A8A29E; border-bottom: 2px solid transparent; }
    </style>
</head>
<body class="antialiased">

    <!-- Navigation -->
    <nav class="nav-glass fixed w-full top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 h-20 flex justify-between items-center">
            <span class="display-text text-2xl font-bold">JR.</span>
            <div class="hidden md:flex space-x-8 text-sm font-medium">
                <button onclick="scrollToSection('about')">About</button>
                <button onclick="scrollToSection('playground')">The Lab</button>
                <button onclick="scrollToSection('contact')">Contact</button>
            </div>
        </div>
    </nav>

    <!-- Hero -->
    <section id="hero" class="min-h-screen flex items-center pt-20 px-4">
        <div class="max-w-7xl mx-auto w-full grid md:grid-cols-2 gap-12 items-center">
            <div>
                <p class="text-amber-600 font-medium mb-4 uppercase tracking-widest">Student & Developer</p>
                <h1 class="text-6xl font-bold leading-tight mb-6">Jeevesh R.</h1>
                <p class="text-xl text-stone-600 mb-8">Turning BCA foundations into real-world solutions through code and strategy.</p>
                <button onclick="scrollToSection('contact')" class="bg-stone-900 text-white px-8 py-4 rounded-lg hover:scale-105 transition-transform">Connect Database</button>
            </div>
            <div class="hidden md:block">
                <div class="w-full aspect-square bg-stone-100 rounded-full border border-stone-200 flex items-center justify-center text-8xl">ðŸš€</div>
            </div>
        </div>
    </section>

    <!-- The Lab (Interactive) -->
    <section id="playground" class="py-24 bg-stone-100">
        <div class="max-w-7xl mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold">The Logic Lab</h2>
                <p class="text-stone-600 mt-2">Experimental modules demonstrating real-time logic.</p>
            </div>
            
            <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
                <div class="flex border-b">
                    <button onclick="switchTab('dsa')" id="tab-dsa" class="tab-active flex-1 py-4">DSA Visualizer</button>
                    <button onclick="switchTab('db')" id="tab-db" class="tab-inactive flex-1 py-4">Live DB Status</button>
                </div>
                <div class="p-8 min-h-[400px]">
                    <div id="content-dsa" class="block">
                        <div class="chart-container"><canvas id="sortCanvas"></canvas></div>
                        <center><button onclick="runSortingDemo()" class="mt-6 bg-stone-900 text-white px-6 py-2 rounded">Run Bubble Sort</button></center>
                    </div>
                    <div id="content-db" class="hidden">
                        <div class="bg-stone-900 text-green-400 p-6 rounded font-mono text-sm h-64 overflow-y-auto" id="db-log">
                            > Initializing Supabase Connection...<br>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Form (Supabase Connected) -->
    <section id="contact" class="py-24 bg-white">
        <div class="max-w-3xl mx-auto px-4">
            <h2 class="text-4xl font-bold mb-8">Send a Message</h2>
            <div class="space-y-4">
                <input type="email" id="user-email" placeholder="your@email.com" class="w-full p-4 border rounded-lg focus:ring-2 focus:ring-amber-500 outline-none">
                <textarea id="user-message" rows="4" placeholder="Your message..." class="w-full p-4 border rounded-lg focus:ring-2 focus:ring-amber-500 outline-none"></textarea>
                <button onclick="sendMessage()" id="send-btn" class="w-full bg-stone-900 text-white py-4 rounded-lg font-bold hover:bg-black transition-colors">
                    Save to Supabase
                </button>
                <p id="form-status" class="text-center text-sm mt-2"></p>
            </div>
        </div>
    </section>

    <script>
        // --- SUPABASE CONFIGURATION ---
        // REPLACE THESE with your actual Supabase URL and Anon Key
        const SUPABASE_URL = "https://xkxkrldlbursvnvtrrtx.supabase.co"; 
        const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhreGtybGRsYnVyc3ZudnRycnR4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk0MDc4NTIsImV4cCI6MjA4NDk4Mzg1Mn0.5SRtjpv4FkEDnOnNorLAKLAJp_HWMt3u8OH1dtRP2cw";
        
        const supabase = (SUPABASE_URL && SUPABASE_ANON_KEY) 
            ? supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY) 
            : null;

        // --- VISITOR TRACKING LOGIC ---
async function logVisitor() {
    if (!supabase) return;

    const visitData = {
        user_agent: navigator.userAgent,
        screen_resolution: `${window.screen.width}x${window.screen.height}`,
        language: navigator.language
    };

    const { error } = await supabase
        .from('site_visits')
        .insert([visitData]);

    if (error) {
        console.error("Tracking Error:", error);
    } else {
        console.log("Visit logged successfully.");
    }
}

// Run this as soon as the page finishes loading
window.addEventListener('load', logVisitor);

        async function sendMessage() {
            const email = document.getElementById('user-email').value;
            const message = document.getElementById('user-message').value;
            const btn = document.getElementById('send-btn');
            const status = document.getElementById('form-status');

            if (!supabase) {
                status.innerText = "âš ï¸ Supabase keys missing in code!";
                return;
            }

            if (!email || !message) {
                status.innerText = "Please fill all fields.";
                return;
            }

            btn.disabled = true;
            btn.innerText = "Sending...";

            const { data, error } = await supabase
                .from('contact_messages')
                .insert([{ email, message }]);

            if (error) {
                console.error(error);
                status.innerText = "Error: " + error.message;
            } else {
                status.innerText = "âœ… Message saved to Supabase!";
                document.getElementById('user-email').value = "";
                document.getElementById('user-message').value = "";
            }
            btn.disabled = false;
            btn.innerText = "Save to Supabase";
        }

        // --- UI LOGIC ---
        function scrollToSection(id) {
            window.scrollTo({ top: document.getElementById(id).offsetTop - 80, behavior: 'smooth' });
        }

        function switchTab(tab) {
            document.getElementById('content-dsa').classList.toggle('hidden', tab !== 'dsa');
            document.getElementById('content-db').classList.toggle('hidden', tab !== 'db');
            document.getElementById('tab-dsa').className = tab === 'dsa' ? 'tab-active flex-1 py-4' : 'tab-inactive flex-1 py-4';
            document.getElementById('tab-db').className = tab === 'db' ? 'tab-active flex-1 py-4' : 'tab-inactive flex-1 py-4';
            
            if (tab === 'db' && supabase) {
                const log = document.getElementById('db-log');
                log.innerHTML += `> Pinged Supabase at ${new Date().toLocaleTimeString()}<br>`;
                log.innerHTML += `> Status: Connected to PostgreSQL<br>`;
            }
        }

        // --- SORTING VISUALIZER ---
        const ctx = document.getElementById('sortCanvas').getContext('2d');
        let data = [40, 20, 90, 60, 10, 30, 80, 50, 70];
        const chart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: data.map(() => ''),
                datasets: [{ data: data, backgroundColor: '#44403C', borderRadius: 5 }]
            },
            options: { responsive: true, maintainAspectRatio: false, scales: { y: { display: false }, x: { display: false } }, plugins: { legend: false } }
        });

        async function runSortingDemo() {
            let arr = [...data];
            for (let i = 0; i < arr.length; i++) {
                for (let j = 0; j < arr.length - i - 1; j++) {
                    if (arr[j] > arr[j + 1]) {
                        [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]];
                        chart.data.datasets[0].data = [...arr];
                        chart.update('none');
                        await new Promise(r => setTimeout(r, 100));
                    }
                }
            }
        }
    </script>
</body>
</html>


